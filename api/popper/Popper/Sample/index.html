<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sample (popper.Popper.Sample)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">popper</a> &#x00BB; <a href="../index.html">Popper</a> &#x00BB; Sample</nav><h1>Module <code>Popper.Sample</code></h1><nav class="toc"><ul><li><a href="#types">Types</a></li><li><a href="#basic-combinators">Basic Combinators</a></li><li><a href="#primitives">Primitives</a></li><li><a href="#combinators-for-higher-kinded-types">Combinators for higher-kinded types</a></li><li><a href="#debugging-combinators">Debugging combinators</a></li></ul></nav></header><aside><p>This module contains functions for drawing arbitrary samples of test data. There are some primitive sample functions as well as combinators for building more complex ones.</p></aside><section><header><h2 id="types"><a href="#types" class="anchor"></a>Types</h2></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> <span>'a t</span></code></dt><dd><p>A value of type <code>'a t</code> is a parser that when run with an <code>Input.t</code> value, produces some output containing a value of type <code>'a</code>.</p></dd></dl></section><section><header><h2 id="basic-combinators"><a href="#basic-combinators" class="anchor"></a>Basic Combinators</h2></header><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'b</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>map f s</code> creates a sample that when run maps its output value using the function <code>f</code>.</p></dd></dl><dl><dt class="spec value" id="val-return"><a href="#val-return" class="anchor"></a><code><span class="keyword">val</span> return : <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>return x</code> is a sample that does not read any input and always produces a value containing <code>x</code>.</p></dd></dl><dl><dt class="spec value" id="val-bind"><a href="#val-bind" class="anchor"></a><code><span class="keyword">val</span> bind : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>bind s f</code> is a sample that when run, first executes <code>s</code> on the given input, then applies its output value to <code>f</code> in order to produe a new sample that is run on the remaining input. This is the monadic operator for sequencing sample operations.</p></dd></dl><dl><dt class="spec value" id="val-both"><a href="#val-both" class="anchor"></a><code><span class="keyword">val</span> both : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>both s1 s2</code> is a sample that when run executes <code>s1</code> followed by <code>s2</code> and combines their results.</p></dd></dl><dl><dt class="spec value" id="val-size"><a href="#val-size" class="anchor"></a><code><span class="keyword">val</span> size : <span>int <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>size</code> returns the current <code>max-size</code> argument.</p></dd></dl><dl><dt class="spec value" id="val-sized"><a href="#val-sized" class="anchor"></a><code><span class="keyword">val</span> sized : <span>(int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>sized f</code> lifts the function <code>f</code> that depend on a size argument to a sample.</p></dd></dl><dl><dt class="spec value" id="val-resize"><a href="#val-resize" class="anchor"></a><code><span class="keyword">val</span> resize : int <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>resize n s</code> creates a sample that when run fixes the size parameter to <code>n</code>.</p></dd></dl><dl><dt class="spec value" id="val-one_of"><a href="#val-one_of" class="anchor"></a><code><span class="keyword">val</span> one_of : <span><span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>one_of ss</code> is a sample that selects one of the given sample from the list <code>ss</code>.</p></dd></dl><dl><dt class="spec value" id="val-one_value_of"><a href="#val-one_value_of" class="anchor"></a><code><span class="keyword">val</span> one_value_of : <span><span class="type-var">'a</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>one_vlaue_of xs</code> same as <code>one_of</code> but lifts all values to samples using <code>return</code>.</p></dd></dl><dl><dt class="spec value" id="val-choose"><a href="#val-choose" class="anchor"></a><code><span class="keyword">val</span> choose : <span><span>(float * <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> list</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>choose fss</code> chooses one sample from the list with a probability corresponding to the relative weight, as specified by the weight and sample pairs in <code>fss</code>.</p></dd></dl><dl><dt class="spec value" id="val-delayed"><a href="#val-delayed" class="anchor"></a><code><span class="keyword">val</span> delayed : <span>(unit <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>delayed f</code> is sample that delays the production of the sample using <code>f</code> until run</p></dd></dl><dl><dt class="spec value" id="val-sequence"><a href="#val-sequence" class="anchor"></a><code><span class="keyword">val</span> sequence : <span><span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> list</span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> list</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>sequence ss</code> is a sample that runs each sample in <code>ss</code> and combines their results in a list.</p></dd></dl></section><section><header><h2 id="primitives"><a href="#primitives" class="anchor"></a>Primitives</h2></header><dl><dt class="spec value" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span class="keyword">val</span> unit : <span>unit <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>unit</code> is a sample that produce a unit value without consuming any input.</p></dd></dl><dl><dt class="spec value" id="val-int"><a href="#val-int" class="anchor"></a><code><span class="keyword">val</span> int : <span>int <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>int</code> is a sample that produces <code>int</code> values.</p></dd></dl><dl><dt class="spec value" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span class="keyword">val</span> int32 : <span>int32 <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>int32</code> is a sample that produces <code>int32</code> values.</p></dd></dl><dl><dt class="spec value" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span class="keyword">val</span> int64 : <span>int64 <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>int64</code> is a sample that produces <code>int64</code> values.</p></dd></dl><dl><dt class="spec value" id="val-char"><a href="#val-char" class="anchor"></a><code><span class="keyword">val</span> char : <span>char <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>char</code> is a sample that produces <code>char</code> values.</p></dd></dl><dl><dt class="spec value" id="val-float"><a href="#val-float" class="anchor"></a><code><span class="keyword">val</span> float : <span>float <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>float</code> is a sample that produces <code>float</code> values.</p></dd></dl><dl><dt class="spec value" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span class="keyword">val</span> bool : <span>bool <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>bool</code> is a sample that produces <code>bool</code> values.</p></dd></dl><dl><dt class="spec value" id="val-fn"><a href="#val-fn" class="anchor"></a><code><span class="keyword">val</span> fn : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'b</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>fn s</code> is a sample that produces a function value.</p></dd></dl><dl><dt class="spec value" id="val-string"><a href="#val-string" class="anchor"></a><code><span class="keyword">val</span> string : <span>string <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>char</code> is a sample that produces <code>char</code> values.</p></dd></dl></section><section><header><h2 id="combinators-for-higher-kinded-types"><a href="#combinators-for-higher-kinded-types" class="anchor"></a>Combinators for higher-kinded types</h2></header><dl><dt class="spec value" id="val-option"><a href="#val-option" class="anchor"></a><code><span class="keyword">val</span> option : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> option</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>option s</code> is a sample that either produces a value <code>None</code> or a value <code>Some</code> using <code>s</code>.</p></dd></dl><dl><dt class="spec value" id="val-result"><a href="#val-result" class="anchor"></a><code><span class="keyword">val</span> result : <span>ok:<span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></span> <span>&#45;&gt;</span> <span>error:<span><span class="type-var">'b</span> <a href="index.html#type-t">t</a></span></span> <span>&#45;&gt;</span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> Stdlib.result</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>result ~ok ~error</code> is a sample that produces a result value, either using the <code>ok</code> sample, or an error using the <code>error</code> sample.</p></dd></dl><dl><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span><span class="type-var">'a</span> list</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>list s</code> is a sample that produces a list using the give <code>s</code>. The size of the list is not determined but is influenced by the implicit <code>size</code> parameter.</p></dd></dl></section><section><header><h2 id="debugging-combinators"><a href="#debugging-combinators" class="anchor"></a>Debugging combinators</h2></header><dl><dt class="spec value" id="val-log_key_value"><a href="#val-log_key_value" class="anchor"></a><code><span class="keyword">val</span> log_key_value : string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>unit <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>log_key_value key value</code> is a sample that when run logs the given <code>key</code> and <code>value</code> pair without consuming any input.</p></dd></dl><dl><dt class="spec value" id="val-with_log"><a href="#val-with_log" class="anchor"></a><code><span class="keyword">val</span> with_log : string <span>&#45;&gt;</span> <span>(Stdlib.Format.formatter <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>with_log key pp s</code> enhances the given sample <code>s</code> so as to also log its result using the <code>key</code> and printer <code>pp</code> for producing a string value.</p></dd></dl><dl><dt class="spec value" id="val-with_consumed"><a href="#val-with_consumed" class="anchor"></a><code><span class="keyword">val</span> with_consumed : <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <a href="../Consumed/index.html#type-t">Consumed.t</a>)</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>with_consumed s</code> is a sample produces a pair of a value using <code>s</code> and its consumed data. This would only be used for debugging purposes.</p></dd></dl><dl><dt class="spec value" id="val-tag_name"><a href="#val-tag_name" class="anchor"></a><code><span class="keyword">val</span> tag_name : string <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="index.html#type-t">t</a></span></code></dt><dd><p><code>tag_name name s</code> is a sample that when run, applies <code>s</code> but tags its consumed input with the given <code>name</code>. Mostly useful for debuggin.</p></dd></dl><div class="spec module" id="module-Syntax"><a href="#module-Syntax" class="anchor"></a><code><span class="keyword">module</span> <a href="Syntax/index.html">Syntax</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Int"><a href="#module-Int" class="anchor"></a><code><span class="keyword">module</span> <a href="Int/index.html">Int</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Float"><a href="#module-Float" class="anchor"></a><code><span class="keyword">module</span> <a href="Float/index.html">Float</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-List"><a href="#module-List" class="anchor"></a><code><span class="keyword">module</span> <a href="List/index.html">List</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Array"><a href="#module-Array" class="anchor"></a><code><span class="keyword">module</span> <a href="Array/index.html">Array</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-String"><a href="#module-String" class="anchor"></a><code><span class="keyword">module</span> <a href="String/index.html">String</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Tuple"><a href="#module-Tuple" class="anchor"></a><code><span class="keyword">module</span> <a href="Tuple/index.html">Tuple</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></section></div></body></html>